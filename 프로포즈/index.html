<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>í”„ë¡œí¬ì¦ˆ</title>

<style>
body {
    margin: 0;
    height: 100vh;
    overflow: hidden;
    font-family: Arial, sans-serif;
    background-color: #fff0f5;
    touch-action: none;
}

h1 {
    position: fixed;
    top: 18%;
    width: 100%;
    text-align: center;
    font-size: 2.2rem;
}

#teaseText {
    position: fixed;
    top: 28%;
    width: 100%;
    text-align: center;
    font-size: 1.3rem;
    color: #ff4d6d;
    opacity: 0;
    transition: opacity 0.25s ease;
    font-weight: bold;
}

button {
    padding: 14px 28px;
    font-size: 18px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    position: fixed;
    z-index: 10;
}

#yes {
    background: #ff4d6d;
    color: white;
}

#no {
    background: #cccccc;
}

#result {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    flex-direction: column;
    align-items: center;
    text-align: center;
}

#result img {
    width: 250px;
    margin-bottom: 20px;
}

/* ğŸ’– í•˜íŠ¸ í­ë°œ */
.heart {
    position: fixed;
    font-size: 22px;
    pointer-events: none;
    animation: explode 1s ease-out forwards;
}

@keyframes explode {
    0% {
        opacity: 1;
        transform: translate(0,0) scale(1);
    }
    100% {
        opacity: 0;
        transform: translate(var(--x), var(--y)) scale(1.8);
    }
}
</style>
</head>
<body>

<h1>ë‚˜ë‘ ê²°í˜¼í•´ ì¤„ë˜?</h1>
<div id="teaseText">ì•Œì•˜ì–´ ëˆ„ë¥´ê²Œ í•´ì¤„ê²Œ</div>

<button id="yes">ì˜ˆ ğŸ’</button>
<button id="no">ì•„ë‹ˆì˜¤ ğŸ™ˆ</button>

<div id="result">
    <img src="ì‚ì§„ ê³ ì–‘ì´.jpg">
    <h2>â¤ï¸ ì´ì œ í‰ìƒ í•¨ê»˜ì•¼ â¤ï¸</h2>
</div>

<script>
const noBtn = document.getElementById("no");
const yesBtn = document.getElementById("yes");
const result = document.getElementById("result");
const teaseText = document.getElementById("teaseText");

let posX, posY;
let vx = 0, vy = 0;
let pointerX = 0, pointerY = 0;
let prevX = 0, prevY = 0;

let teaseMode = false;
let allowClickTrap = false;
let teaseCooldown = false;

function initPosition() {
    const cx = window.innerWidth / 2;
    const cy = window.innerHeight / 2;

    yesBtn.style.left = (cx - 90) + "px";
    yesBtn.style.top = cy + "px";

    posX = cx + 30;
    posY = cy;

    noBtn.style.left = posX + "px";
    noBtn.style.top = posY + "px";
}

initPosition();
window.addEventListener("resize", initPosition);

window.addEventListener("pointermove", e => {
    prevX = pointerX;
    prevY = pointerY;
    pointerX = e.clientX;
    pointerY = e.clientY;
});

function checkTeaseProximity() {
    if (teaseMode || teaseCooldown) return;

    const dx = posX - pointerX;
    const dy = posY - pointerY;
    const dist = Math.sqrt(dx*dx + dy*dy);

    if (dist < 120 && Math.random() < 0.12) {

        teaseMode = true;
        teaseCooldown = true;
        allowClickTrap = true;

        teaseText.style.opacity = 1;

        vx = 0;
        vy = 0;

        setTimeout(() => {
            allowClickTrap = false;
            teaseText.style.opacity = 0;
            teaseMode = false;
        }, 700);

        setTimeout(() => {
            teaseCooldown = false;
        }, 3000);
    }
}

noBtn.addEventListener("pointerdown", e => {
    if (allowClickTrap) {
        e.preventDefault();

        setTimeout(() => {
            const dx = posX - pointerX;
            const dy = posY - pointerY;
            const dist = Math.sqrt(dx*dx + dy*dy) || 1;

            vx = (dx / dist) * 40;
            vy = (dy / dist) * 40;
        }, 100);
    }
});

function update() {
    checkTeaseProximity();

    posX += vx;
    posY += vy;

    const maxX = window.innerWidth - noBtn.offsetWidth;
    const maxY = window.innerHeight - noBtn.offsetHeight;

    if (posX <= 0 || posX >= maxX) {
        vx *= -0.8;
        posX = Math.max(0, Math.min(maxX, posX));
        vy += (Math.random() - 0.5) * 6;
    }

    if (posY <= 0 || posY >= maxY) {
        vy *= -0.8;
        posY = Math.max(0, Math.min(maxY, posY));
        vx += (Math.random() - 0.5) * 6;
    }

    const pvx = pointerX - prevX;
    const pvy = pointerY - prevY;

    const futureX = pointerX + pvx * 4;
    const futureY = pointerY + pvy * 4;

    const dx = posX - futureX;
    const dy = posY - futureY;
    const dist = Math.sqrt(dx*dx + dy*dy) || 1;

    if (!teaseMode && dist < 160) {
        vx += (dx / dist) * 2.5;
        vy += (dy / dist) * 2.5;
    }

    vx *= 0.9;
    vy *= 0.9;

    if (Math.abs(vx) < 0.3 && Math.abs(vy) < 0.3) {
        vx += (Math.random() - 0.5) * 8;
        vy += (Math.random() - 0.5) * 8;
    }

    noBtn.style.left = posX + "px";
    noBtn.style.top = posY + "px";

    requestAnimationFrame(update);
}

/* ğŸ’– í•˜íŠ¸ í­ë°œ í•¨ìˆ˜ */
function explodeHearts() {
    const centerX = window.innerWidth / 2;
    const centerY = window.innerHeight / 2;

    for (let i = 0; i < 40; i++) {
        const heart = document.createElement("div");
        heart.className = "heart";
        heart.innerHTML = "ğŸ’–";

        heart.style.left = centerX + "px";
        heart.style.top = centerY + "px";

        const x = (Math.random() - 0.5) * 600 + "px";
        const y = (Math.random() - 0.5) * 600 + "px";

        heart.style.setProperty("--x", x);
        heart.style.setProperty("--y", y);

        document.body.appendChild(heart);

        setTimeout(() => heart.remove(), 1000);
    }
}

yesBtn.addEventListener("click", () => {
    yesBtn.style.display = "none";
    noBtn.style.display = "none";
    teaseText.style.display = "none";

    explodeHearts();

    setTimeout(() => {
        result.style.display = "flex";
    }, 800);
});

update();
</script>

</body>
</html>
